service: vellm-api

provider:
  name: aws
  runtime: nodejs4.3
  region: eu-central-1
  stage: v1 
  iamRoleStatements:
    - Effect: Allow
      Action:
        - s3:*
      Resource: "*"

custom:
  bucket: markdown-prod

functions:
  vellums_get:
    handler: functions/vellums.get
    environment:
      BUCKET: ${self:custom.bucket}
    events:
      - http: 
          path: users/{user}/vellums/{vellum}
          method: get
          integration: lambda
          request:
            parameters:
              paths:
                user: true
                vellum: true